# ğŸš€ Mo'edim Manual Deployment Instructions

## âœ… Current Status: Ready for Production Deployment

**Local Environment Verified:**
- âœ… API responding: `http://localhost:3000/torah/daily`
- âœ… Docker services: PostgreSQL, Redis, MeiliSearch all running
- âœ… Database: Connected and functional
- âœ… Mobile app: React Native app running on port 8081
- âœ… GitHub: All code pushed to https://github.com/mrterryt40/moedim

---

## ğŸš‚ Step 1: Deploy Backend to Railway

### A. Create Railway Account & Project
1. **Go to**: [railway.app](https://railway.app)
2. **Sign up/Login** with your GitHub account (mrterryt40)
3. **Click "New Project"** â†’ **"Deploy from GitHub repo"**
4. **Search for and select**: `mrterryt40/moedim`

### B. Configure Railway Service
```bash
# Service Configuration
Service Name: moedim-api
Root Directory: apps/api
Build Command: npm run build
Start Command: npm run start:prod
Port: 3000 (Railway will auto-detect)
```

### C. Add PostgreSQL Database
1. **In Railway Dashboard**: Click **"+ New"** button
2. **Select**: **"Database"** â†’ **"PostgreSQL"**
3. **Railway will auto-generate**: DATABASE_URL environment variable

### D. Set Environment Variables
In Railway â†’ Your Service â†’ Variables tab:
```bash
NODE_ENV=production
JWT_SECRET=moedim-super-secret-jwt-key-production-5785
CORS_ORIGIN=*
DATABASE_URL=(auto-generated by Railway PostgreSQL)
```

### E. Deploy & Get URL
1. **Railway will auto-deploy** after configuration
2. **Your API URL will be**: `https://your-service-name.up.railway.app`
3. **Copy this URL** - you'll need it for testing

---

## âš¡ Step 2: Deploy Frontend to Vercel

### A. Create Vercel Account & Project
1. **Go to**: [vercel.com](https://vercel.com)
2. **Sign up/Login** with GitHub (mrterryt40)
3. **Click "New Project"** â†’ **"Import Git Repository"**
4. **Select**: `mrterryt40/moedim`

### B. Configure Vercel Project
```bash
# Project Configuration
Framework Preset: Other
Root Directory: . (leave as root)
Build Command: npm run build:web
Output Directory: apps/web/dist
Install Command: npm install
```

### C. Environment Variables
In Vercel â†’ Project â†’ Settings â†’ Environment Variables:
```bash
NEXT_PUBLIC_API_URL=https://your-railway-url.up.railway.app
NODE_ENV=production
```

### D. Deploy & Get URL
1. **Vercel will auto-deploy** after configuration
2. **Your web URL will be**: `https://moedim.vercel.app`

---

## ğŸ§ª Step 3: Test Deployments

### A. Test Railway API
```bash
# Replace with your actual Railway URL
curl https://your-service-name.up.railway.app/
curl https://your-service-name.up.railway.app/torah/daily
```

**Expected Response:**
```json
{
  "nameEnglish": "Bereishit",
  "nameHebrew": "×‘×¨××©×™×ª",
  "hebrewDate": "20 Sivan 5785",
  "isSabbath": true,
  "content": {
    "english": "In the beginning God created the heavens and the earth...",
    "hebrew": "×‘×¨××©×™×ª ×‘×¨× ××œ×”×™× ××ª ×”×©××™× ×•××ª ×”××¨×¥..."
  }
}
```

### B. Test Vercel Frontend
1. **Visit**: Your Vercel URL
2. **Should see**: Web application loading
3. **Check console**: No API connection errors

---

## ğŸ“± Step 4: Update Mobile App for Production

### A. Update API URL in Mobile App
Edit: `apps/mobile/src/screens/DailyTorahScreen.tsx`

**Change from:**
```typescript
const response = await fetch('http://localhost:3000/torah/daily');
```

**To:**
```typescript
const response = await fetch('https://your-railway-url.up.railway.app/torah/daily');
```

### B. Test Mobile App with Production API
1. **Start mobile app**: `npm run dev:mobile`
2. **Open DailyTorahScreen**
3. **Verify**: Data loads from production API
4. **Test**: Hebrew/English toggle, mark as read

---

## ğŸ”§ Step 5: Database Setup (Important!)

### A. Run Database Migrations on Railway
1. **In Railway**: Go to your PostgreSQL service
2. **Connect to database** using Railway's console or connection string
3. **Run migrations**:
```bash
# Use the DATABASE_URL from Railway
npx prisma migrate deploy
npx prisma db seed # If you have seed data
```

### B. Verify Database Connection
```bash
# Your API should now connect to Railway PostgreSQL
curl https://your-railway-url.up.railway.app/torah/portions
```

---

## âœ… Deployment Verification Checklist

### Railway (Backend API):
- [ ] Project created from GitHub repo
- [ ] PostgreSQL database added and connected
- [ ] Environment variables configured
- [ ] Service deployed successfully
- [ ] API responds at railway.app URL
- [ ] `/torah/daily` returns Torah data
- [ ] Database migrations completed

### Vercel (Frontend):
- [ ] Project imported from GitHub
- [ ] Build configuration correct
- [ ] Environment variables set
- [ ] Deployment successful
- [ ] Web app loads at vercel.app URL
- [ ] No console errors

### Mobile App:
- [ ] API URL updated to production
- [ ] Mobile app connects to production API
- [ ] Torah screen loads production data
- [ ] All features work correctly

---

## ğŸ¯ Expected Production URLs

After deployment, you should have:
- **API**: `https://moedim-api-xxxxx.up.railway.app`
- **Web**: `https://moedim.vercel.app`
- **GitHub**: `https://github.com/mrterryt40/moedim`
- **Mobile**: Expo app connecting to production API

---

## ğŸš¨ Troubleshooting

### If Railway deployment fails:
1. Check build logs in Railway dashboard
2. Verify `apps/api/package.json` has correct scripts
3. Ensure environment variables are set
4. Check DATABASE_URL is properly connected

### If Vercel deployment fails:
1. Check build logs in Vercel dashboard
2. Verify build command and output directory
3. Check environment variables

### If API returns errors:
1. Check Railway logs for errors
2. Verify database connection
3. Ensure migrations ran successfully

---

## ğŸ‰ After Successful Deployment

**You'll have a fully functional Israelite learning platform:**
- âœ… Production API serving Torah content
- âœ… Web application deployed globally
- âœ… Mobile app connecting to production
- âœ… Database with Hebrew calendar integration
- âœ… Ready for users to start learning!

**Next steps:**
1. Add more Torah portions to database
2. Implement user authentication
3. Add Hebrew learning features
4. Deploy smart contracts to testnet

**The Mo'edim platform is ready to serve the Israelite community! ğŸ›ï¸ğŸ“±âœ¨**